# feature-engineering-book

精通特征工程

## 第一章 机器学习流程

- 数据：对现实世界的现象的观测。

- 数学模型：描述了数据不同部分之间的关系。

- 特征：原始数据的数值表示。

- 特征工程：在给定数据、模型和任务的情况下设计出最合适的特征的过程。

![fig1-1_特征工程在机器学习流程中的位置](./figures/fig1-1_特征工程在机器学习流程中的位置.jpg)

## 第二章 简单而又奇妙的数值

好的特征不仅能够表示出数据的主要特点，还应该符合模型的假设，因此通常必须进行数据转换。

### 2.1 标量、向量和空间

单独的数值型特征称为标量，标量的有序列表称为向量，向量位于向量空间中。在绝大多数机器学习应用中，模型的输入通常表示为数值向量。

### 2.2 处理计数

大数据时代，数据可以大量且快速的生成，很有可能包含一些极端值。因此，需要检查数据的尺度，确定是应该保留数据原始的数值形式，还是应该将它们转换成二值数据，或者进行粗粒度的分箱操作。

#### 2.2.1 二值化

Echo Nest Taste Profile是百万歌曲数据集（Million Song Dataset）的正式用户数据子集，其中包含了100万用户在Echo Nest网站上完整的音乐收听历史。

数据集包括：

- 超过4800万个由用户ID、歌曲ID 和收听次数构成的三元组。

- 完整的数据集中包括1019318个独立用户和384546首独立歌曲。

根据对歌曲收听次数统计，收听次数并不能明显的反应用户对歌曲的喜爱程度，为了更强壮的用户偏好表示方法是将收听次数二值化，把所有大于1的次数值设为1。换言之，如果用户收听了某首歌曲至少一次，那么就认为该用户喜欢该歌曲。这样，模型就不用花费开销来预测原始收听次数之前的时间差别。二值目标变量是一个既简单又强壮的用户偏好衡量指标。

```python
    import pandas as pd
    listen_count = pd.read_csv('millionsong/train_triplets.txt.zip',
        header=None, delimiter='\t')
    # 表中包含有形式为“用户-歌曲-收听次数”的三元组。只包含非零收听次数。
    # 因此，要二值化收听次数，只需将整个收听次数列设为1。
    listen_count[2] = 1
```

### 2.2.2 区间量化（分箱）

数据源：Yelp 点评网站数据竞赛（http://www.yelp.com/dataset_challenge）第6 轮的数据。

数据信息：

- 782 个商业分类。

- 整个数据集包含1569264（≈160万）条点评和61184个商家。

- 就点评数量而言，“Restaurants”（990627条点评）和“Nightlife”（210028条点评）是最普遍的分类。

- 没有商家既属于餐馆又属于夜生活场所，所以这两个点评分组中没有重叠。

任务：使用协同过滤方法预测某用户给某商家的打分。而点评数量会是一个非常有用得输入特征，因为人气和高评分之间通常有很强的相关性。但是是否需要对原始点评数量数据进行加工呢？

首先对数据集本身进行分析：

```python

```